<!DOCTYPE html>
<html lang="bg">
<head>
  <meta charset="UTF-8">
  <title>Online Test Generator</title>

  <!-- Bootstrap CSS (без integrity за по-лесно) -->
  <link 
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" 
    rel="stylesheet"
  />

  <!-- Твоят собствен CSS (style.css), намира се в папка public/css/ -->
  <link 
    rel="stylesheet" 
    href="css/style.css" 
  />
</head>
<body>
  <header>
    <h2>Online Test Generator</h2>
  </header>

  <nav>
    <!-- Идентификатори за динамично показване/скриване -->
    <a  id="loginLink" href="login.html">Login</a>
    <a  id="registerLink" href="register.html">Register</a>
    <a id="adminLink" href="adminPanel.html" style="display: none;">Admin Panel</a>
    <a id="profileLink" href="profile.html" style="display: none;">Моят акаунт</a>
    <a id="logoutLink" href="/auth/logout" style="display: none;">Изход</a>
  </nav>

  <div class="container">
    <h1>Добре дошли в нашата платформа</h1>
    <p>
      Тук можете да се регистрирате и да участвате в динамично генерирани тестове по различни категории.
      Ако сте администратор, ще можете да създавате нови въпроси, да задавате параметри на тестове и да следите резултатите.
    </p>
  </div>

  <footer>
    <p>&copy; 2025 OnlineTestGenerator. Всички права запазени.</p>
  </footer>

  <!-- Bootstrap JS (ако искаш да ползваш модали, dropdown и т.н.) -->
  <script 
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js">
  </script>

  <script>
    // Когато страницата се зареди:
    window.onload = async function() {
      try {
        const response = await fetch('/auth/status');
        const data = await response.json();

        if (data.loggedIn) {
          document.getElementById('loginLink').style.display = 'none';
          document.getElementById('registerLink').style.display = 'none';
          document.getElementById('logoutLink').style.display = 'inline-block';
          document.getElementById('profileLink').style.display = 'inline-block';

          if (data.user.role === 'admin') {
            document.getElementById('adminLink').style.display = 'inline-block';
          }
        } else {
          document.getElementById('adminLink').style.display = 'none';
          document.getElementById('profileLink').style.display = 'none';
          document.getElementById('logoutLink').style.display = 'none';
        }
      } catch (err) {
        console.error('Error checking auth status:', err);
      }
    };
  </script>
</body>
</html>
